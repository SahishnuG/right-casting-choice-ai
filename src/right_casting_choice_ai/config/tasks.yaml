extract_characters_task:
  description: >
    Given the user plot string "{plot}", extract atleast 2 key characters and their
    characteristics (role, name_hint, age_range, traits, gender). **Return JSON array only.**
    DO NOT include any explanatory text. The assistant must return a compact JSON array exactly.
  expected_output: >
    A JSON array (atleast 2 items) like:
    [
      {"role":"Lead Male","name_hint":"Arjun","age_range":"25-35","traits":["brave","reckless"], "gender":"male"},
      {"role":"Lead Female","name_hint":"Meera","age_range":"20-30","traits":["witty","fierce"], "gender":"female"}
    ]
  agent: character_extractor

similar_movies_task:
  description: >
    Using the plot "{plot}", industry={industry}, and n_similar={n_similar}, run Serper to find
    similar movie titles and fetch OMDb metadata for each. Use USDâ†’INR={usd_to_inr} when converting
    non-INR amounts for Bollywood preference. Return a list of movie dicts with normalized fields.
  expected_output: >
    A list of dicts: {Title, Year, Actors, Poster, BoxOfficeINR, BudgetINR, imdbRating, imdbID, _raw}
  agent: similar_movies_and_omdb

rank_candidates_task:
  description: >
    Aggregate actors from the OMDb results and compute scores given user_budget_inr or user_budget_usd
    depending on industry={industry}. Return sorted candidates for each character profile (a recommended_pool (top 6)) generated by extract_characters_task, and per-movie metadata.
    Make sure that the gender/age_range of the candidates matches those given in the character profile.
  expected_output: >
    A JSON array (atleast 2 items) like:
    [
      {"candidates": [...], "role":"Lead Male","name_hint":"Arjun", "movies": [...]},
      {"candidates": [...], "role":"Lead Female","name_hint":"Meera", "movies": [...]}
    ]
  agent: budget_ranker
